!function(){"use strict";function a(a,b){function c(a){function b(){}return b.prototype=a,new b}var d=c(b.prototype);d.constructor=a,a.prototype=d}function b(){}function c(a){this._ul=a,this._currentIndex=this._prevLi=this._nextLi=this._curLi=void 0,this._transitionFlag=!1}function d(a,b){function c(d){b(d),a.removeEventListener("webkitTransitionEnd",c,!1),a.removeEventListener("mozTransitionEnd",c,!1),a.removeEventListener("MSTransitionEnd",c,!1),a.removeEventListener("otransitionend",c,!1),a.removeEventListener("transitionend",c,!1)}a.addEventListener("webkitTransitionEnd",c,!1),a.addEventListener("mozTransitionEnd",c,!1),a.addEventListener("MSTransitionEnd",c,!1),a.addEventListener("otransitionend",c,!1),a.addEventListener("transitionend",c,!1)}function e(a,b,c){!function(a,b,c){if("ontouchend"in document)switch(b){case"touchstart":a.addEventListener("touchstart",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchmove":a.addEventListener("touchmove",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchend":a.addEventListener("touchend",function(a){c(a,void 0,void 0)},!1)}else switch(b){case"touchstart":a.addEventListener("mousedown",function(b){a._mousedown=!0,c(b,b.clientX,b.clientY)},!1);break;case"touchmove":a.addEventListener("mousemove",function(b){a._mousedown&&c(b,b.clientX,b.clientY)},!1);break;case"touchend":a.addEventListener("mouseup",function(b){a._mousedown=!1,c(b,b.clientX,b.clientY)},!1),a.addEventListener("mouseout",function(b){a._mousedown=!1,c(b,b.clientX,b.clientY)},!1)}}(a,b,c)}function f(){var a=navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)}window.mobileSlide=function(a,b){if(1!=a.nodeType||"ul"!=a.tagName.toLowerCase())return void console.warn("mobileSlide's param is not a HTML UL Element.");if(a.children.length<=1)return void console.warn("ul > li's number must > 1.");a.style.overflow="hidden",a.style.position="relative";for(var d=0;d<a.children.length;d++)a.children[d].style.listStyle="none",a.children[d].style.position="relative",0!==d&&(a.children[d].style.display="none");!function(){var d,g,h,i,j=new c(a);b&&b.afterTransitionFunc&&b.afterTransitionFunc(j.getCurrentIndex(),a.children.length),e(a,"touchstart",function(a,c,e){f()&&a.preventDefault(),b&&b.stopPropagation&&a.stopPropagation(),j.getCurrentIndex(),d=c,g=e}),e(a,"touchmove",function(a,c,e){b&&b.stopPropagation&&a.stopPropagation(),h=c-d,i=e-g,j.move(h,i)}),e(a,"touchend",function(c,e,f){b&&b.stopPropagation&&c.stopPropagation(),j.transition(h,i,function(){d=g=h=i=void 0,b&&b.afterTransitionFunc&&b.afterTransitionFunc(j.getCurrentIndex(),a.children.length)})})}()},a(c,b),c.prototype.getCurrentIndex=function(){if(!this._transitionFlag){for(var a=0;a<this._ul.children.length;a++)if("none"!=this._ul.children[a].style.display&&"relative"==this._ul.children[a].style.position)return a!==this._currentIndex&&(this._prevLi=0>=a?this._ul.children[this._ul.children.length-1]:this._ul.children[a-1],this._nextLi=a>=this._ul.children.length-1?this._ul.children[0]:this._ul.children[a+1],this._curLi=this._ul.children[a],this._currentIndex=a),this._currentIndex;throw"Can not find active ul."}},c.prototype._hideNext=function(){void 0!==this._currentIndex&&(this._nextLi.style.display="none",this._nextLi.style.position="relative",this._nextLi.style.top="",this._nextLi.style.width="",this._nextLi.style.left="")},c.prototype._showNext=function(){void 0!==this._currentIndex&&(this._nextLi.style.display="block",this._nextLi.style.position="absolute",this._nextLi.style.top="0",this._nextLi.style.width="100%",this._nextLi.style.left="100%")},c.prototype._showPrev=function(){void 0!==this._currentIndex&&(this._prevLi.style.display="block",this._prevLi.style.position="absolute",this._prevLi.style.top="0",this._prevLi.style.width="100%",this._prevLi.style.left="-100%")},c.prototype._hidePrev=function(){void 0!==this._currentIndex&&(this._prevLi.style.display="none",this._prevLi.style.position="relative",this._prevLi.style.top="",this._prevLi.style.width="",this._prevLi.style.left="")},c.prototype._setTransitionFlag=function(){this._transitionFlag=!0},c.prototype._clearTransitionFlag=function(){this._transitionFlag=!1},c.prototype.move=function(a,b){this._transitionFlag||(a>0&&Math.abs(a)<=this._ul.clientWidth?(this._nextLi!==this._prevLi&&this._hideNext(),"none"==this._prevLi.style.display&&this._showPrev(),this._prevLi.style.left=-this._prevLi.offsetWidth+a+"px",this._curLi.style.left=a+"px"):0>a&&Math.abs(a)<=this._ul.clientWidth&&(this._nextLi!==this._prevLi&&this._hidePrev(),"none"==this._nextLi.style.display&&this._showNext(),this._nextLi.style.left=this._nextLi.offsetWidth+a+"px",this._curLi.style.left=a+"px"))},c.prototype.transition=function(a,b,c){if(!this._transitionFlag&&void 0!==this._currentIndex&&a){var e,f=Math.abs(a)<=.2*this._ul.clientWidth,g=a>0,h=this._curLi,i=this;g?(e=this._prevLi,h.style.transition=e.style.transition=h.style.webkitTransition=e.style.webkitTransition=".6s ease all",f?(e.style.left=-this._ul.clientWidth+"px",h.style.left="0px"):(e.style.left="0px",h.style.left=this._ul.clientWidth+"px")):(e=this._nextLi,h.style.transition=e.style.transition=h.style.webkitTransition=e.style.webkitTransition=".6s ease all",f?(e.style.left=this._ul.clientWidth+"px",h.style.left="0px"):(e.style.left="0px",h.style.left=-this._ul.clientWidth+"px")),this._setTransitionFlag(),d(h,function(){h.style.transition=h.style.webkitTransition="",f?h.style.left="":(h.style.display="none",h.style.position="relative",h.style.top=h.style.width=h.style.left=""),i._clearTransitionFlag(),c&&c()}),d(e,function(){e.style.transition=e.style.webkitTransition="",f?(e.style.display="none",e.style.position="relative",e.style.left=e.style.top=e.style.width=""):(e.style.left=e.style.top=e.style.width="",e.style.display="block",e.style.position="relative"),i._clearTransitionFlag(),c&&c()})}},"function"==typeof define&&define.amd&&define("mobileSlide",[],function(){return window.mobileSlide})}();