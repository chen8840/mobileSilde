!function(){"use strict";function a(a,b){function c(a){function b(){}return b.prototype=a,new b}var d=c(b.prototype);d.constructor=a,a.prototype=d}function b(){}function c(a){this._ul=a,this._currentIndex=this._prevLi=this._nextLi=this._curLi=void 0,this._transitionFlag=!1}function d(a){this._ul=a,this._currentIndex=this._prevLi=this._nextLi=this._curLi=void 0,this._transitionFlag=!1}function e(a,b){function c(d){b(d),a.removeEventListener("webkitTransitionEnd",c,!1),a.removeEventListener("mozTransitionEnd",c,!1),a.removeEventListener("MSTransitionEnd",c,!1),a.removeEventListener("otransitionend",c,!1),a.removeEventListener("transitionend",c,!1)}a.addEventListener("webkitTransitionEnd",c,!1),a.addEventListener("mozTransitionEnd",c,!1),a.addEventListener("MSTransitionEnd",c,!1),a.addEventListener("otransitionend",c,!1),a.addEventListener("transitionend",c,!1)}function f(a,b,c){!function(a,b,c){if("ontouchend"in document)switch(b){case"touchstart":a.addEventListener("touchstart",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchmove":a.addEventListener("touchmove",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchend":a.addEventListener("touchend",function(a){c(a,void 0,void 0)},!1)}else switch(b){case"touchstart":a.addEventListener("mousedown",function(b){a._mousedown=!0,c(b,b.clientX,b.clientY)},!1);break;case"touchmove":a.addEventListener("mousemove",function(b){a._mousedown&&c(b,b.clientX,b.clientY)},!1);break;case"touchend":a.addEventListener("mouseup",function(b){a._mousedown&&(a._mousedown=!1,c(b,b.clientX,b.clientY))},!1),a.addEventListener("mouseout",function(b){a._mousedown&&(a._mousedown=!1,c(b,b.clientX,b.clientY))},!1)}}(a,b,c)}function g(){var a=navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)}window.mobileSlide=function(a,b){if(1!=a.nodeType||"ul"!=a.tagName.toLowerCase())return void console.warn("mobileSlide's param is not a HTML UL Element.");if(a.children.length<=1)return void console.warn("ul > li's number must > 1.");a.style.overflow="hidden",a.style.position="relative";for(var e=0;e<a.children.length;e++)a.children[e].style.listStyle="none",a.children[e].style.position="relative",0!==e&&(a.children[e].style.display="none");!function(){var e,h,i,j,k;k=b&&"vertical"===b.direction?new d(a):new c(a),b&&b.afterTransitionFunc&&b.afterTransitionFunc(k.getCurrentIndex(),a.children.length),f(a,"touchstart",function(a,c,d){g()&&a.preventDefault(),b&&b.stopPropagation&&a.stopPropagation(),k.getCurrentIndex(),e=c,h=d}),f(a,"touchmove",function(a,c,d){b&&b.stopPropagation&&a.stopPropagation(),i=c-e,j=d-h,k.move(i,j)}),f(a,"touchend",function(c,d,f){b&&b.stopPropagation&&c.stopPropagation(),k.transition(i,j,function(){b&&b.beforeTransitionFunc&&b.beforeTransitionFunc(k.getCurrentIndex(),a.children.length)},function(){e=h=i=j=void 0,b&&b.afterTransitionFunc&&b.afterTransitionFunc(k.getCurrentIndex(),a.children.length)})})}()},a(c,b),c.prototype.getCurrentIndex=function(){if(this._transitionFlag)return this._currentIndex;for(var a=0;a<this._ul.children.length;a++)if("none"!=this._ul.children[a].style.display&&"relative"==this._ul.children[a].style.position)return a!==this._currentIndex&&(this._prevLi=0>=a?this._ul.children[this._ul.children.length-1]:this._ul.children[a-1],this._nextLi=a>=this._ul.children.length-1?this._ul.children[0]:this._ul.children[a+1],this._curLi=this._ul.children[a],this._currentIndex=a),this._currentIndex;throw"Can not find active ul."},c.prototype._hideNext=function(){void 0!==this._currentIndex&&(this._nextLi.style.display="none",this._nextLi.style.position="relative",this._nextLi.style.top="",this._nextLi.style.width="",this._nextLi.style.left="")},c.prototype._showNext=function(){void 0!==this._currentIndex&&(this._nextLi.style.display="block",this._nextLi.style.position="absolute",this._nextLi.style.top="0",this._nextLi.style.width="100%",this._nextLi.style.left="100%")},c.prototype._showPrev=function(){void 0!==this._currentIndex&&(this._prevLi.style.display="block",this._prevLi.style.position="absolute",this._prevLi.style.top="0",this._prevLi.style.width="100%",this._prevLi.style.left="-100%")},c.prototype._hidePrev=function(){void 0!==this._currentIndex&&(this._prevLi.style.display="none",this._prevLi.style.position="relative",this._prevLi.style.top="",this._prevLi.style.width="",this._prevLi.style.left="")},c.prototype._setTransitionFlag=function(){this._transitionFlag=!0},c.prototype._clearTransitionFlag=function(){this._transitionFlag=!1},c.prototype.move=function(a,b){this._transitionFlag||(a>0&&Math.abs(a)<=this._ul.clientWidth?(this._nextLi!==this._prevLi&&this._hideNext(),"none"==this._prevLi.style.display&&this._showPrev(),this._prevLi.style.left=-this._prevLi.offsetWidth+a+"px",this._curLi.style.left=a+"px"):0>a&&Math.abs(a)<=this._ul.clientWidth&&(this._nextLi!==this._prevLi&&this._hidePrev(),"none"==this._nextLi.style.display&&this._showNext(),this._nextLi.style.left=this._nextLi.offsetWidth+a+"px",this._curLi.style.left=a+"px"))},c.prototype.transition=function(a,b,c,d){if(!this._transitionFlag&&void 0!==this._currentIndex&&a){var f,g=Math.abs(a)<=.2*this._ul.clientWidth,h=a>0,i=this._curLi,j=this;h?(f=this._prevLi,i.style.transition=f.style.transition=i.style.webkitTransition=f.style.webkitTransition=".6s ease all",g?(f.style.left=-this._ul.clientWidth+"px",i.style.left="0px"):(f.style.left="0px",i.style.left=this._ul.clientWidth+"px")):(f=this._nextLi,i.style.transition=f.style.transition=i.style.webkitTransition=f.style.webkitTransition=".6s ease all",g?(f.style.left=this._ul.clientWidth+"px",i.style.left="0px"):(f.style.left="0px",i.style.left=-this._ul.clientWidth+"px")),c&&c(),this._setTransitionFlag();var k=!1;e(i,function(){i.style.transition=i.style.webkitTransition="",g?i.style.left="":(i.style.display="none",i.style.position="relative",i.style.top=i.style.width=i.style.left=""),j._clearTransitionFlag(),d&&k?d():k=!0}),e(f,function(){f.style.transition=f.style.webkitTransition="",g?(f.style.display="none",f.style.position="relative",f.style.left=f.style.top=f.style.width=""):(f.style.left=f.style.top=f.style.width="",f.style.display="block",f.style.position="relative"),j._clearTransitionFlag(),d&&k?d():k=!0})}},a(d,b),d.prototype.getCurrentIndex=function(){if(this._transitionFlag)return this._currentIndex;for(var a=0;a<this._ul.children.length;a++)if("none"!=this._ul.children[a].style.display&&"relative"==this._ul.children[a].style.position)return a!==this._currentIndex&&(this._prevLi=0>=a?this._ul.children[this._ul.children.length-1]:this._ul.children[a-1],this._nextLi=a>=this._ul.children.length-1?this._ul.children[0]:this._ul.children[a+1],this._curLi=this._ul.children[a],this._currentIndex=a),this._currentIndex;throw"Can not find active ul."},d.prototype._hideNext=function(){void 0!==this._currentIndex&&(this._nextLi.style.display="none",this._nextLi.style.position="relative",this._nextLi.style.top="",this._nextLi.style.width="",this._nextLi.style.Height="",this._nextLi.style.left="")},d.prototype._showNext=function(){void 0!==this._currentIndex&&(this._nextLi.style.display="block",this._nextLi.style.position="absolute",this._nextLi.style.top="100%",this._nextLi.style.width="100%",this._nextLi.style.Height="100%",this._nextLi.style.left="0")},d.prototype._showPrev=function(){void 0!==this._currentIndex&&(this._prevLi.style.display="block",this._prevLi.style.position="absolute",this._prevLi.style.top="-100%",this._prevLi.style.width="100%",this._prevLi.style.Height="100%",this._prevLi.style.left="0")},d.prototype._hidePrev=function(){void 0!==this._currentIndex&&(this._prevLi.style.display="none",this._prevLi.style.position="relative",this._prevLi.style.top="",this._prevLi.style.width="",this._prevLi.style.Height="",this._prevLi.style.left="")},d.prototype._setTransitionFlag=function(){this._transitionFlag=!0},d.prototype._clearTransitionFlag=function(){this._transitionFlag=!1},d.prototype.move=function(a,b){this._transitionFlag||(b>0&&Math.abs(b)<=this._ul.clientHeight?(this._nextLi!==this._prevLi&&this._hideNext(),"none"==this._prevLi.style.display&&this._showPrev(),this._prevLi.style.top=-this._prevLi.offsetHeight+b+"px",this._curLi.style.top=b+"px"):0>b&&Math.abs(b)<=this._ul.clientHeight&&(this._nextLi!==this._prevLi&&this._hidePrev(),"none"==this._nextLi.style.display&&this._showNext(),this._nextLi.style.top=this._nextLi.offsetHeight+b+"px",this._curLi.style.top=b+"px"))},d.prototype.transition=function(a,b,c,d){if(!this._transitionFlag&&void 0!==this._currentIndex&&b){var f,g=Math.abs(b)<=.2*this._ul.clientHeight,h=b>0,i=this._curLi,j=this;h?(f=this._prevLi,i.style.transition=f.style.transition=i.style.webkitTransition=f.style.webkitTransition=".6s ease all",g?(f.style.top=-this._ul.clientHeight+"px",i.style.top="0px"):(f.style.top="0px",i.style.top=this._ul.clientHeight+"px")):(f=this._nextLi,i.style.transition=f.style.transition=i.style.webkitTransition=f.style.webkitTransition=".6s ease all",g?(f.style.top=this._ul.clientHeight+"px",i.style.top="0px"):(f.style.top="0px",i.style.top=-this._ul.clientHeight+"px")),c&&c(),this._setTransitionFlag();var k=!1;e(i,function(){i.style.transition=i.style.webkitTransition="",g?i.style.top="":(i.style.display="none",i.style.position="relative",i.style.top=i.style.width=i.style.left=""),j._clearTransitionFlag(),d&&k?d():k=!0}),e(f,function(){f.style.transition=f.style.webkitTransition="",g?(f.style.display="none",f.style.position="relative",f.style.left=f.style.top=f.style.width=f.style.height=""):(f.style.left=f.style.top=f.style.width=f.style.width="",f.style.display="block",f.style.position="relative"),j._clearTransitionFlag(),d&&k?d():k=!0})}},"function"==typeof define&&define.amd&&define("mobileSlide",[],function(){return window.mobileSlide})}();